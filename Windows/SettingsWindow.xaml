<Window x:Class="SecureMemo.Windows.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ì„¤ì •" Height="500" Width="600"
        WindowStyle="None" ResizeMode="NoResize"
        Background="#1a1a1a" AllowsTransparency="True"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <Style TargetType="Button" x:Key="ModernButton">
            <Setter Property="Background" Value="#2a2a2a"/>
            <Setter Property="Foreground" Value="#e0e0e0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3a3a3a"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- íƒ€ì´í‹€ë°” -->
        <Border Grid.Row="0" Background="#1a1a1a" BorderBrush="#2a2a2a" BorderThickness="0,0,0,1"
                MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid>
                <TextBlock Text="ì„¤ì •" Foreground="#888" FontSize="13" 
                           VerticalAlignment="Center" Margin="10,0"/>
                <Button Content="Ã—" Width="46" Height="32" Click="CloseButton_Click"
                        HorizontalAlignment="Right" FontSize="16"
                        Style="{StaticResource ModernButton}"/>
            </Grid>
        </Border>

        <!-- ì„¤ì • ë‚´ìš© -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="20">
                <!-- ë¹„ë°€ë²ˆí˜¸ ì„¤ì • -->
                <Border Background="#2a2a2a" CornerRadius="8" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="ë¹„ë°€ë²ˆí˜¸ ë³´í˜¸" Foreground="#e0e0e0" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                        
                        <CheckBox x:Name="UsePasswordCheckBox" Content="ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©" 
                                  Foreground="#e0e0e0" Margin="0,0,0,12"
                                  Checked="UsePasswordCheckBox_Checked"
                                  Unchecked="UsePasswordCheckBox_Unchecked"/>

                        <StackPanel x:Name="PasswordPanel" Visibility="Collapsed">
                            <TextBlock Text="ë¹„ë°€ë²ˆí˜¸" Foreground="#888" FontSize="13" Margin="0,0,0,4"/>
                            <Grid Margin="0,0,0,12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <PasswordBox x:Name="NewPasswordBox" Grid.Column="0"
                                             Background="#1a1a1a" Foreground="#e0e0e0"
                                             BorderBrush="#3a3a3a" Padding="8" Height="36"/>
                                <TextBox x:Name="NewPasswordTextBox" Grid.Column="0"
                                         Background="#1a1a1a" Foreground="#e0e0e0"
                                         BorderBrush="#3a3a3a" Padding="8" Height="36"
                                         Visibility="Collapsed"/>
                                <Button Grid.Column="1" Content="ðŸ‘" Width="40" Height="36"
                                        Click="TogglePasswordVisibility_Click"
                                        Style="{StaticResource ModernButton}" Margin="4,0,0,0"/>
                            </Grid>

                            <Button Content="ë¹„ë°€ë²ˆí˜¸ ì„¤ì •" Click="SetPassword_Click"
                                    Background="#6366f1" Foreground="White"
                                    Style="{StaticResource ModernButton}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- AI ì„¤ì • -->
                <Border Background="#2a2a2a" CornerRadius="8" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="AI ì—°ê²° (Gemini)" Foreground="#e0e0e0" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                        
                        <TextBlock Text="API í‚¤" Foreground="#888" FontSize="13" Margin="0,0,0,4"/>
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <PasswordBox x:Name="ApiKeyPasswordBox" Grid.Column="0"
                                         Background="#1a1a1a" Foreground="#e0e0e0"
                                         BorderBrush="#3a3a3a" Padding="8" Height="36"/>
                            <TextBox x:Name="ApiKeyTextBox" Grid.Column="0"
                                     Background="#1a1a1a" Foreground="#e0e0e0"
                                     BorderBrush="#3a3a3a" Padding="8" Height="36"
                                     Visibility="Collapsed"/>
                            <Button Grid.Column="1" Content="ðŸ‘" Width="40" Height="36"
                                    Click="ToggleApiKeyVisibility_Click"
                                    Style="{StaticResource ModernButton}" Margin="4,0,0,0"/>
                        </Grid>

                        <WrapPanel Orientation="Horizontal">
                            <Button Content="ì €ìž¥" Click="SaveApiKey_Click"
                                    Background="#6366f1" Foreground="White"
                                    Style="{StaticResource ModernButton}" Margin="0,0,8,0"/>
                            <Button x:Name="TestApiButton" Content="API í…ŒìŠ¤íŠ¸" Click="TestApi_Click"
                                    Style="{StaticResource ModernButton}"/>
                        </WrapPanel>

                        <TextBlock x:Name="ApiTestResult" Foreground="#888" FontSize="12" 
                                   Margin="0,8,0,0" TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

                <!-- ì •ë³´ -->
                <Border Background="#2a2a2a" CornerRadius="8" Padding="16" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="ì—…ë°ì´íŠ¸" Foreground="#e0e0e0" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                        
                        <TextBlock x:Name="VersionText" Foreground="#888" FontSize="13" Margin="0,0,0,8"/>
                        
                        <Button x:Name="CheckUpdateButton" Content="ì—…ë°ì´íŠ¸ í™•ì¸" Click="CheckUpdate_Click"
                                Style="{StaticResource ModernButton}" Margin="0,0,0,8"/>
                        
                        <TextBlock x:Name="UpdateStatusText" Foreground="#888" FontSize="12" 
                                   Margin="0,0,0,8" TextWrapping="Wrap"/>
                        
                        <ProgressBar x:Name="UpdateProgressBar" Height="4" 
                                     Visibility="Collapsed" Margin="0,0,0,8"/>
                        
                        <Button x:Name="InstallUpdateButton" Content="ì—…ë°ì´íŠ¸ ì„¤ì¹˜" Click="InstallUpdate_Click"
                                Visibility="Collapsed" Background="#6366f1" Foreground="White"
                                Style="{StaticResource ModernButton}"/>
                    </StackPanel>
                </Border>

                <!-- ì •ë³´ -->
                <Border Background="#2a2a2a" CornerRadius="8" Padding="16">
                    <StackPanel>
                        <TextBlock Text="ì •ë³´" Foreground="#e0e0e0" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                        <TextBlock Foreground="#888" FontSize="13" TextWrapping="Wrap">
                            <Run Text="SecureMemo"/><LineBreak/>
                            <Run Text="ëª¨ë“  ë°ì´í„°ëŠ” ë¡œì»¬ì— ì•”í˜¸í™”ë˜ì–´ ì €ìž¥ë©ë‹ˆë‹¤."/><LineBreak/>
                            <Run Text="ë¹„ë°€ë²ˆí˜¸ë¥¼ ìžŠì–´ë²„ë¦¬ë©´ ë°ì´í„°ë¥¼ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."/>
                        </TextBlock>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
