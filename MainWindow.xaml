<Window x:Class="SecureMemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SecureMemo" Height="600" Width="1000"
        WindowStyle="None" ResizeMode="CanResize"
        Background="#1a1a1a" AllowsTransparency="True">
    <Window.Resources>
        <Style TargetType="Button" x:Key="ModernButton">
            <Setter Property="Background" Value="#2a2a2a"/>
            <Setter Property="Foreground" Value="#e0e0e0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3a3a3a"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 타이틀바 -->
        <Border Grid.Row="0" Background="#1a1a1a" BorderBrush="#2a2a2a" BorderThickness="0,0,0,1"
                MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid>
                <TextBlock Text="SecureMemo" Foreground="#888" FontSize="13" 
                           VerticalAlignment="Center" Margin="10,0"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="−" Width="46" Height="32" Click="MinimizeButton_Click"
                            Style="{StaticResource ModernButton}"/>
                    <Button Content="□" Width="46" Height="32" Click="MaximizeButton_Click"
                            Style="{StaticResource ModernButton}"/>
                    <Button Content="×" Width="46" Height="32" Click="CloseButton_Click"
                            Style="{StaticResource ModernButton}" FontSize="16"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 메인 컨텐츠 -->
        <Grid Grid.Row="1" x:Name="MainContent" Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- 사이드바 -->
            <Border Grid.Column="0" Background="#1e1e1e" BorderBrush="#2a2a2a" BorderThickness="0,0,1,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Margin="12" Orientation="Horizontal">
                        <Button Content="+ 새 노트" Click="NewMemo_Click"
                                Background="#6366f1" Foreground="White" 
                                Padding="16,10" FontSize="14" FontWeight="Medium"
                                Style="{StaticResource ModernButton}"/>
                        <Button Content="설정" Click="Settings_Click" Margin="8,0,0,0"
                                Style="{StaticResource ModernButton}"/>
                    </StackPanel>

                    <ListBox Grid.Row="1" x:Name="MemoListBox" 
                             Background="Transparent" BorderThickness="0"
                             Foreground="#e0e0e0" Margin="8,0"
                             SelectionChanged="MemoListBox_SelectionChanged">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="12" Margin="0,2" CornerRadius="6">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="{Binding Title}" FontWeight="Medium" FontSize="14"/>
                                            <TextBlock Text="{Binding UpdatedAt, StringFormat='yyyy-MM-dd'}" 
                                                       Foreground="#888" FontSize="12" Margin="0,4,0,0"/>
                                        </StackPanel>
                                        
                                        <Button Grid.Column="1" Content="🗑️" 
                                                Click="DeleteMemo_Click" Tag="{Binding}"
                                                Background="Transparent" Foreground="#888"
                                                BorderThickness="0" Padding="8" Cursor="Hand"
                                                FontSize="16" VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </Border>

            <!-- 에디터 -->
            <Grid Grid.Column="1" Background="#1a1a1a">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 툴바 -->
                <WrapPanel Grid.Row="0" Orientation="Horizontal" Margin="12">
                    <Button x:Name="ExportWordButton" Content="Word 내보내기" Click="ExportWord_Click" 
                            Style="{StaticResource ModernButton}" Margin="0,0,8,0" Visibility="Collapsed"/>
                    <Button x:Name="RecordButton" Content="🎤 녹음" Click="Record_Click" 
                            Style="{StaticResource ModernButton}" Margin="0,0,8,0" Visibility="Collapsed"/>
                    <Button x:Name="PlayButton" Content="▶ 재생" Click="Play_Click" 
                            Style="{StaticResource ModernButton}" Margin="0,0,8,0" Visibility="Collapsed"/>
                    <Slider x:Name="AudioSlider" Width="200" Margin="0,0,8,0" VerticalAlignment="Center"
                            Minimum="0" Maximum="100" Visibility="Collapsed"
                            ValueChanged="AudioSlider_ValueChanged"/>
                    <Button x:Name="TranscribeButton" Content="음성→텍스트" Click="TranscribeAudio_Click" 
                            Style="{StaticResource ModernButton}" Margin="0,0,8,0" Visibility="Collapsed"/>
                    <Button x:Name="SummarizeButton" Content="요약" Click="SummarizeText_Click" 
                            Style="{StaticResource ModernButton}" Visibility="Collapsed"/>
                </WrapPanel>

                <!-- 에디터 영역 -->
                <Grid Grid.Row="1" Margin="12,0,12,12">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBox x:Name="TitleTextBox" Grid.Row="0" 
                             Background="Transparent" Foreground="#e0e0e0"
                             BorderThickness="0,0,0,2" BorderBrush="#2a2a2a"
                             FontSize="24" Padding="8" Margin="0,0,0,12"
                             TextChanged="TitleTextBox_TextChanged"/>

                    <TextBox x:Name="ContentTextBox" Grid.Row="1"
                             Background="Transparent" Foreground="#e0e0e0"
                             BorderThickness="1" BorderBrush="#2a2a2a"
                             FontSize="16" Padding="12"
                             TextWrapping="Wrap" AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             TextChanged="ContentTextBox_TextChanged"/>
                </Grid>

                <!-- 하단 배너 -->
                <Grid Grid.Row="2" Height="60" Background="#1e1e1e" Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- 커피 사주기 배너 -->
                    <Border Grid.Column="0" Background="#2a2a2a" Margin="8,8,4,8" CornerRadius="6" 
                            Cursor="Hand" MouseLeftButtonDown="CoffeeBanner_Click">
                        <Grid>
                            <TextBlock Text="☕ 개발자에게 커피 사주기" 
                                       Foreground="#e0e0e0" FontSize="14" FontWeight="Medium"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                    </Border>

                    <!-- 블로그 보기 배너 -->
                    <Border Grid.Column="1" Background="#2a2a2a" Margin="4,8,8,8" CornerRadius="6" 
                            Cursor="Hand" MouseLeftButtonDown="BlogBanner_Click">
                        <Grid>
                            <TextBlock Text="📝 개발자 블로그 보기" 
                                       Foreground="#e0e0e0" FontSize="14" FontWeight="Medium"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                    </Border>
                </Grid>
            </Grid>
        </Grid>

        <!-- 비밀번호 입력 화면 -->
        <Border x:Name="PasswordPanel" Grid.Row="1" Background="#1a1a1a">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Width="300">
                <TextBlock Text="비밀번호 입력" Foreground="#e0e0e0" FontSize="24" 
                           FontWeight="Bold" Margin="0,0,0,20" HorizontalAlignment="Center"/>
                <PasswordBox x:Name="PasswordBox" Height="40" Padding="12" 
                             Background="#2a2a2a" Foreground="#e0e0e0" BorderBrush="#3a3a3a"
                             KeyDown="PasswordBox_KeyDown"/>
                <TextBlock x:Name="ErrorText" Foreground="#e81123" Margin="0,8,0,0" 
                           HorizontalAlignment="Center"/>
                <Button Content="확인" Click="Login_Click" Margin="0,20,0,0" Height="40"
                        Background="#6366f1" Foreground="White" FontSize="16"
                        Style="{StaticResource ModernButton}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
